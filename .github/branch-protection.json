{
  "branch_protection_rules": {
    "main": {
      "protection": {
        "required_status_checks": {
          "strict": true,
          "contexts": [
            "quality-checks",
            "performance-tests",
            "test-suite",
            "security-scan"
          ]
        },
        "enforce_admins": true,
        "required_pull_request_reviews": {
          "required_approving_review_count": 2,
          "dismiss_stale_reviews": true,
          "require_code_owner_reviews": true,
          "dismissal_restrictions": {}
        },
        "restrictions": null,
        "allow_force_pushes": false,
        "allow_deletions": false,
        "require_conversation_resolution": true,
        "require_linear_history": false,
        "allow_squash_merge": true,
        "allow_merge_commit": true,
        "allow_rebase_merge": false,
        "delete_branch_on_merge": true
      }
    },
    "develop": {
      "protection": {
        "required_status_checks": {
          "strict": false,
          "contexts": [
            "quality-checks",
            "test-suite"
          ]
        },
        "enforce_admins": false,
        "required_pull_request_reviews": {
          "required_approving_review_count": 1,
          "dismiss_stale_reviews": false,
          "require_code_owner_reviews": false
        },
        "restrictions": null,
        "allow_force_pushes": false,
        "allow_deletions": false,
        "require_conversation_resolution": false,
        "allow_squash_merge": true,
        "allow_merge_commit": true,
        "allow_rebase_merge": true
      }
    },
    "staging": {
      "protection": {
        "required_status_checks": {
          "strict": true,
          "contexts": [
            "quality-checks",
            "performance-tests",
            "test-suite"
          ]
        },
        "enforce_admins": false,
        "required_pull_request_reviews": {
          "required_approving_review_count": 1,
          "dismiss_stale_reviews": true,
          "require_code_owner_reviews": false
        },
        "restrictions": null,
        "allow_force_pushes": false,
        "allow_deletions": false,
        "allow_squash_merge": true,
        "allow_merge_commit": true
      }
    },
    "agent/*": {
      "protection": {
        "required_status_checks": {
          "strict": false,
          "contexts": [
            "quality-checks"
          ]
        },
        "enforce_admins": false,
        "required_pull_request_reviews": null,
        "restrictions": {
          "users": [],
          "teams": ["climate-agents"]
        },
        "allow_force_pushes": true,
        "allow_deletions": false,
        "allow_squash_merge": true,
        "allow_merge_commit": true,
        "allow_rebase_merge": true
      }
    }
  },
  "merge_strategies": {
    "agent_to_develop": {
      "schedule": "0 2 * * *",
      "strategy": "squash",
      "auto_merge": true,
      "conflict_resolution": "manual",
      "quality_gates": {
        "min_test_coverage": 70,
        "max_bundle_size_kb": 500,
        "lighthouse_score": 85
      }
    },
    "develop_to_staging": {
      "schedule": "0 0 * * 1",
      "strategy": "merge",
      "auto_merge": false,
      "approval_required": true,
      "quality_gates": {
        "min_test_coverage": 80,
        "max_bundle_size_kb": 450,
        "lighthouse_score": 90
      }
    },
    "staging_to_main": {
      "schedule": "manual",
      "strategy": "merge",
      "auto_merge": false,
      "approval_required": true,
      "reviewers_required": 2,
      "quality_gates": {
        "min_test_coverage": 85,
        "max_bundle_size_kb": 400,
        "lighthouse_score": 95,
        "security_scan": "pass"
      }
    }
  },
  "auto_merge_config": {
    "enabled": true,
    "delete_branch_after_merge": true,
    "merge_method": "squash",
    "commit_message_template": "Auto-merge: {source} â†’ {target}\n\n{pr_body}\n\nðŸ¤– Merged by automation",
    "labels_required": ["ready-to-merge", "approved"],
    "labels_blocked": ["work-in-progress", "do-not-merge", "needs-review"]
  }
}